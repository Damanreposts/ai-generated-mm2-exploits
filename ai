-- Create the main screen GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "PrisonLifeWeaponGUI"
ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

-- Create the main frame for the UI
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 350, 0, 200)  -- Adjust the size as needed
MainFrame.Position = UDim2.new(0.5, -175, 0.5, -100)
MainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui
MainFrame.Active = true
MainFrame.Draggable = true

-- Add UICorner for rounded edges
local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 10)
UICorner.Parent = MainFrame

-- Create the ScrollingFrame to hold the buttons
local ScrollingFrame = Instance.new("ScrollingFrame")
ScrollingFrame.Size = UDim2.new(1, 0, 1, 0)
ScrollingFrame.CanvasSize = UDim2.new(0, 0, 3, 0) -- Adjust CanvasSize for more scrolling area
ScrollingFrame.ScrollBarThickness = 8
ScrollingFrame.Position = UDim2.new(0, 0, 0, 0)
ScrollingFrame.BackgroundTransparency = 1
ScrollingFrame.Parent = MainFrame

-- Helper function to create buttons
local function createButton(name, text, position, callback)
    local Button = Instance.new("TextButton")
    Button.Name = name
    Button.Text = text
    Button.Size = UDim2.new(0, 320, 0, 50)
    Button.Position = position
    Button.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    Button.TextColor3 = Color3.fromRGB(255, 255, 255)
    Button.BorderColor3 = Color3.fromRGB(255, 0, 0)
    Button.Parent = ScrollingFrame

    Button.MouseButton1Click:Connect(callback)
end

-- Function to give AK-47
local function getAK47()
    local toolName = "AK-47"  -- Name of the tool
    local backpack = game.Players.LocalPlayer.Backpack

    for _, item in pairs(game.Workspace.Prison_ITEMS.giver:GetChildren()) do
        if item.Name:lower():find("ak") or item.Name:lower():find("ak47") then
            item:Activate()
            break
        end
    end

    wait(0.5)

    for _, tool in pairs(backpack:GetChildren()) do
        if tool.Name == toolName then
            print("Successfully acquired AK-47.")
            return
        end
    end

    print("Failed to acquire AK-47.")
end

-- Function to give Remington Shotgun
local function getRemington()
    local toolName = "Remington 870"  -- Name of the tool
    local backpack = game.Players.LocalPlayer.Backpack

    for _, item in pairs(game.Workspace.Prison_ITEMS.giver:GetChildren()) do
        if item.Name:lower():find("remington") or item.Name:lower():find("shotgun") then
            item:Activate()
            break
        end
    end

    wait(0.5)

    for _, tool in pairs(backpack:GetChildren()) do
        if tool.Name == toolName then
            print("Successfully acquired Remington 870.")
            return
        end
    end

    print("Failed to acquire Remington 870.")
end

-- Function to give M9
local function getM9()
    local toolName = "M9"  -- Name of the tool
    local backpack = game.Players.LocalPlayer.Backpack

    for _, item in pairs(game.Workspace.Prison_ITEMS.giver:GetChildren()) do
        if item.Name:lower():find("m9") then
            item:Activate()
            break
        end
    end

    wait(0.5)

    for _, tool in pairs(backpack:GetChildren()) do
        if tool.Name == toolName then
            print("Successfully acquired M9.")
            return
        end
    end

    print("Failed to acquire M9.")
end

-- Creating buttons with the specified actions
createButton("GetAK47Button", "Get AK-47", UDim2.new(0, 10, 0, 10), getAK47)
createButton("GetRemingtonButton", "Get Remington Shotgun", UDim2.new(0, 10, 0, 70), getRemington)
createButton("GetM9Button", "Get M9", UDim2.new(0, 10, 0, 130), getM9)

-- Create the Open/Close button outside the main frame
local ToggleButton = Instance.new("TextButton")
ToggleButton.Name = "ToggleButton"
ToggleButton.Text = "Open/Close"
ToggleButton.Size = UDim2.new(0, 100, 0, 50)
ToggleButton.Position = UDim2.new(0, 10, 0, 10)  -- Adjust position as needed
ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.BorderColor3 = Color3.fromRGB(255, 0, 0)
ToggleButton.Parent = ScreenGui

-- Toggle visibility of the MainFrame
local guiVisible = true

ToggleButton.MouseButton1Click:Connect(function()
    guiVisible = not guiVisible
    MainFrame.Visible = guiVisible
end)
